<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>India-Pakistan War</title>
    <link href="https://fonts.googleapis.com/css2?family=Literata:opsz,wght@7..72,500;7..72,700&family=Lora:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link rel="icon" type="image/x-icon"
        href="https://raw.githubusercontent.com/mapbox/assembly/publisher-staging/src/svgs/mapbox.svg">
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.css' rel='stylesheet' />
    <script src="https://cdn.jsdelivr.net/npm/mapbox-gl-globe-minimap@1.2.0/dist/bundle.js"></script>
    <script src="https://unpkg.com/scrollama"></script>

    <style>
        /* @import url('https://fonts.googleapis.com/css2?family=Loretta&display=swap'); */

        #intro-container h1 {
        font-family: 'Lora', georgia; /* fixed to match others */
        font-size: 2.5em;
        margin-bottom: 0.5em;
        text-align: center; /* center align */
        }

        #intro-container {
            padding: 60px 10vw 40px 10vw;
            background-color: #f9f9f9;
            text-align: center;
            z-index: 10;
            position: relative;
            z-index: 10;
        }

        .intro-content {
    width: 100%;
    padding: 0 10vw; /* Matches #intro-container padding */
    text-align: left;
    box-sizing: border-box;
}


        #outro-container {
            padding: 60px 10vw 40px 10vw;
            background-color: #f9f9f9;
            text-align: center;
            position: relative;
            z-index: 10;
            border-top: 1px solid #ffffff;
        }

        #map-container {
            position: relative;
            width: 100%;
            height: 100vh;
            z-index: 1;
            /* This ensures the map container takes up the full viewport height */
        }

        h1 {
            font-family: 'Lora', georgia;
            text-align: left;
        }

        h2 {
            font-family: 'Lora', georgia;
            text-align: left;
        }

        #intro-container h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5em;
            margin-bottom: 0.5em;
        }

        #intro-container h2 {
            font-family: 'Lora', georgia;
            font-size: 1.2em;
            font-weight: 400;
            margin-bottom: 1.5em;
            text-align: left; /* center align */

        }



        .content {
            font-family: 'Lora', georgia;
            font-size: 1.1em;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            text-align: left;

        }

        .content p {
            margin-bottom: 1.6em;
        }

        .step h3 {
            font-size: 1.8em;
            font-family: 'Lora', georgia;
            /* or your desired font */
            font-weight: 700;
            /* optional for bold */
            margin-bottom: 0.5em;
        }

        .main-description {
            font-size: 1.5em;
            font-weight: bold;
            line-height: 1.6;
        }

        .more-description {
            font-size: 1.2em;
            font-weight: 400;
            /* lighter than bold */
            color: #555;
            /* optional: makes it visually less prominent */
            line-height: 1.5;
            margin-top: 0.5em;
        }

        body {

            margin: 0;
            padding: 0;
        }

        #custom-box {
            position: absolute;
            top: 80px;
            left: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px 15px;
            max-width: 300px;
            font-size: 14px;
            z-index: 10;
            border-radius: 6px;
            font-family: 'Fira Sans', sans-serif;
        }

        a,
        a:hover,
        a:visited {
            color: #0071bc;
        }

        #map {
            top: 0;
            height: 100vh;
            width: 100vw;
            position: absolute;
        }

        #header {
            margin: auto;
            width: 100%;
            position: relative;
            z-index: 5;
        }

        #header h1,
        #header h2,
        #header p {
            margin: 0;
            padding: 2vh 2vw;
            text-align: center;
        }

        #footer {
            width: 100%;
            min-height: 5vh;
            padding-top: 2vh;
            padding-bottom: 2vh;
            text-align: center;
            line-height: 25px;
            font-size: 13px;
            position: relative;
            z-index: 5;
            font-family: 'Lora', georgia;
            text-align: center;
        }

        #features {
            padding-top: 10vh;
            padding-bottom: 10vh;
        }

        #footer {
            width: 100%;
            padding: 40px 10vw;
            background-color: #f9f9f9;
            text-align: center;
            font-size: 13px;
            z-index: 5;
            border-top: 1px solid #e0e0e0;
            position: relative;
        }
        #scrollytelling-section {
    position: relative;
    width: 100%;
    min-height: 100vh;
    z-index: 1;
}

#map {
    position: fixed;
    top: 0;
    width: 100%;
    height: 100vh;
}

#story {
    position: relative;
    z-index: 5;
}

        .hidden {
            visibility: hidden;
        }

        .centered {
            width: 50vw;
            margin: 0 auto;
        }

        .lefty {
            width: 33vw;
            margin-left: 5vw;
        }

        .righty {
            width: 33vw;
            margin-left: 62vw;
        }

        .fully {
            width: 100%;
            margin: auto;
        }

        .light {
            color: #444;
            background-color: #fafafa;
        }

        .dark {
            color: #fafafa;
            background-color: #444;
        }

        .step {
            padding-bottom: 50vh;
            /* margin-bottom: 10vh; */
            opacity: 0.25;
        }

        .step.active {
            opacity: 0.9;
        }

        .step div {
            padding: 25px 50px;
            line-height: 25px;
            font-size: 13px;
            font-family: 'Lora', georgia;
        }

        .step img {
            width: 100%;
        }

        .hero-image-container {
            margin: 0 auto 30px auto;
            max-width: 900px;
            /* Matches the content max-width */
            width: 100%;
            overflow: hidden;
        }

        .hero-image {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
            /* Optional: adds slightly rounded corners */
        }

        @media (max-width: 750px) {

            .centered,
            .lefty,
            .righty,
            .fully {
                width: 90vw;
                margin: 0 auto;
            }
        }

        /* Fix issue on mobile browser where scroll breaks  */
        .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,
        .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas {
            touch-action: unset;
        }
    </style>
</head>


<body>

        <div id="intro-container">
            <h1>Rival countries, India and Pakistan, fought after a terror attack in Kashmir</h1>
            <h2>The dramatic flare-up between the nuclear countries was sparked by a deadly attack on Hindu tourists in Indian-administered Kashmir in April which took 26 lives. India claimed Pakistan supported the militants behind the attack.</h2>
            <p>By <a href="https://somaiyahhafeez.github.io/">Somaiyah Hafeez</a></p>
            <div class="hero-image-container">
             <img src="./assets/map.png" alt="India-Pakistan map" class="hero-image">
                <iframe title="Rival countries, India and Pakistan, fought each other after a terrorist attack in disputed Kashmir region" aria-label="Locator map" id="datawrapper-chart-qvkSt" src="https://datawrapper.dwcdn.net/qvkSt/4/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="546" data-external="1"></iframe><script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r,i=0;r=e[i];i++)if(r.contentWindow===a.source){var d=a.data["datawrapper-height"][t]+"px";r.style.height=d}}}))}();
</script>
<!--              <img src="./assets/map.png" alt="India-Pakistan map" class="hero-image"> -->
        </div>
        <div class="content">
            <p>
                On May 7th India launched Operation Sindoor claiming to have hit "terrorist infrastructure", targeting terrorist organizations including the Jaish-e-Muhammad (JeM) and Lashkar-e-Tayabba (LeT). JeM, an armed group based in Pakistan, claimed responsibility for a suicide bombing in Februart 2019 in Pulwama in Indian-adminstered Kashmir which killed 40 Indian paramilitary soliders.

            </p>
            <p> 
               The late-night missile strikes that hit six Pakistani sites resulted in at least 26 civilian deaths and 46 injured.
               According to BBC the <a href="https://www.bbc.com/news/articles/cjewen7w192ofamily">relatives of Masood Azhar</a>, chief of JeM, were killed in the strike in Bahawalpur. 
            </p>
            <p> 
               For four days Pakistan and India fought each other with firings on the Line of Control, the border separating Indian-adminstered Kashmir and Pakistani-adminstered Kashmir. India targeted three airbases in Pakistan on May 10th after which Pakistan launched Operation Bunyan-um-Marsoos claiming to have India's power grid, airfields and posts across the LoC amongst other sites.
            </p>
            <p>
                Amid attacks from both ends, talks continued between both the countries, mediated by the US. On May 11, President Donald Trump announced that both India and Pakistan agreed to an immediate ceasefire. 
            </p>
            <p> This was the first time in decades that the two nuclear countries were at the brink of all-out war. </p>
        </div>

        </div>
            <div id="map-container">
        <div id="map"></div>
        <div id="story"></div>
        </div>
<div id="outro-container">
    <iframe title="Rival countries, India and Pakistan, fought each other after a terrorist attack in disputed Kashmir region" aria-label="Locator map" id="datawrapper-chart-qvkSt" src="https://datawrapper.dwcdn.net/qvkSt/4/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="546" data-external="1"></iframe><script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r,i=0;r=e[i];i++)if(r.contentWindow===a.source){var d=a.data["datawrapper-height"][t]+"px";r.style.height=d}}}))}();
</script> 
    <p> The world saw two rival and nuclear armed countries fight each other. TK TK TK</p>
</div>




    <script src="./config.js"></script>
    <script>
        var initLoad = true;
        var layerTypes = {
            'fill': ['fill-opacity'],
            'line': ['line-opacity'],
            'circle': ['circle-opacity', 'circle-stroke-opacity'],
            'symbol': ['icon-opacity', 'text-opacity'],
            'raster': ['raster-opacity'],
            'fill-extrusion': ['fill-extrusion-opacity'],
            'heatmap': ['heatmap-opacity']
        }

        // After map loads
       const scrollytellingSection = document.getElementById('story');



        var alignments = {
            'left': 'lefty',
            'center': 'centered',
            'right': 'righty',
            'full': 'fully'
        }

        function getLayerPaintType(layer) {
            var layerType = map.getLayer(layer).type;
            return layerTypes[layerType];
        }

        function setLayerOpacity(layer) {
            var paintProps = getLayerPaintType(layer.layer);
            paintProps.forEach(function (prop) {
                var options = {};
                if (layer.duration) {
                    var transitionProp = prop + "-transition";
                    options = { "duration": layer.duration };
                    map.setPaintProperty(layer.layer, transitionProp, options);
                }
                map.setPaintProperty(layer.layer, prop, layer.opacity, options);
            });
        }

        var story = document.getElementById('story');
        var features = document.createElement('div');
        features.setAttribute('id', 'features');

        var header = document.createElement('div');

        if (config.title) {
            var titleText = document.createElement('h1');
            titleText.innerText = config.title;
            header.appendChild(titleText);
        }

        if (config.subtitle) {
            var subtitleText = document.createElement('h2');
            subtitleText.innerText = config.subtitle;
            header.appendChild(subtitleText);
        }

        if (config.byline) {
            var bylineText = document.createElement('p');
            bylineText.innerText = config.byline;
            header.appendChild(bylineText);
        }

        if (header.innerText.length > 0) {
            header.classList.add(config.theme);
            header.setAttribute('id', 'header');
            story.appendChild(header);
        }

        config.chapters.forEach((record, idx) => {
            var container = document.createElement('div');
            var chapter = document.createElement('div');

            if (record.title) {
                var title = document.createElement('h3');
                title.innerText = record.title;
                chapter.appendChild(title);
            }

            if (record.image) {
                var image = new Image();
                image.src = record.image;
                chapter.appendChild(image);
            }

            if (record.description) {
                var story = document.createElement('p');
                story.innerHTML = record.description;
                chapter.appendChild(story);
            }

            container.setAttribute('id', record.id);
            container.classList.add('step');
            if (idx === 0) {
                container.classList.add('active');
            }

            chapter.classList.add(config.theme);
            container.appendChild(chapter);
            container.classList.add(alignments[record.alignment] || 'centered');
            if (record.hidden) {
                container.classList.add('hidden');
            }
            features.appendChild(container);
        });
//  {
//     document.getElementById('story').scrollIntoView({ behavior: 'smooth' });
// };

        story.appendChild(features);

        var footer = document.createElement('div');

        if (config.footer) {
            var footerText = document.createElement('p');
            footerText.innerHTML = config.footer;
            footer.appendChild(footerText);
        }

        if (footer.innerText.length > 0) {
            footer.classList.add(config.theme);
            footer.setAttribute('id', 'footer');
            story.appendChild(footer);
        }

        mapboxgl.accessToken = config.accessToken;

        var map = new mapboxgl.Map({
            container: 'map',
            style: config.style,
            center: config.chapters[0].location.center,
            zoom: config.chapters[0].location.zoom,
            bearing: config.chapters[0].location.bearing,
            pitch: config.chapters[0].location.pitch,
            interactive: false,
            projection: config.projection
        });

        // Create a inset map if enabled in config.js
        if (config.inset) {
            map.addControl(
                new GlobeMinimap({ ...config.insetOptions }),
                config.insetPosition
            );
        }

        if (config.showMarkers) {
            var marker = new mapboxgl.Marker({ color: config.markerColor });
            marker.setLngLat(config.chapters[0].location.center).addTo(map);
        }
        var scroller = scrollama();

        map.on("load", function () {
            if (config.use3dTerrain) {
                map.addSource('mapbox-dem', {
                    'type': 'raster-dem',
                    'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',
                    'tileSize': 512,
                    'maxzoom': 14
                });
                // add the DEM source as a terrain layer with exaggerated height
                map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });

                // add a sky layer that will show when the map is highly pitched
                map.addLayer({
                    'id': 'sky',
                    'type': 'sky',
                    'paint': {
                        'sky-type': 'atmosphere',
                        'sky-atmosphere-sun': [0.0, 0.0],
                        'sky-atmosphere-sun-intensity': 15
                    }
                });
            };

            // setup the instance, pass callback functions
            scroller
                .setup({
                    step: '.step',
                    offset: 0.5,
                    progress: true
                })
                .onStepEnter(async response => {
                    var current_chapter = config.chapters.findIndex(chap => chap.id === response.element.id);
                    var chapter = config.chapters[current_chapter];

                    response.element.classList.add('active');
                    map[chapter.mapAnimation || 'flyTo'](chapter.location);

                    if (config.showMarkers) {
                        marker.setLngLat(chapter.location.center);
                    }
                    if (chapter.onChapterEnter.length > 0) {
                        chapter.onChapterEnter.forEach(setLayerOpacity);
                    }
                    if (chapter.callback) {
                        window[chapter.callback]();
                    }
                    if (chapter.rotateAnimation) {
                        map.once('moveend', () => {
                            const rotateNumber = map.getBearing();
                            map.rotateTo(rotateNumber + 180, {
                                duration: 30000, easing: function (t) {
                                    return t;
                                }
                            });
                        });
                    }
                    if (config.auto) {
                        var next_chapter = (current_chapter + 1) % config.chapters.length;
                        map.once('moveend', () => {
                            document.querySelectorAll('[data-scrollama-index="' + next_chapter.toString() + '"]')[0].scrollIntoView();
                        });
                    }
                })
                .onStepExit(response => {
                    var chapter = config.chapters.find(chap => chap.id === response.element.id);
                    response.element.classList.remove('active');
                    if (chapter.onChapterExit.length > 0) {
                        chapter.onChapterExit.forEach(setLayerOpacity);
                    }
                });


            if (config.auto) {
                document.querySelectorAll('[data-scrollama-index="0"]')[0].scrollIntoView();
            }
        });    

    </script>

</body>

</html>
